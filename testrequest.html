
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Wikipedia Lookup</title>
</head>
<body><script type="text/javascript"><!--
var searched='';
var wikicheck = function (data) {
	var found = false;
    var url='';
	//Ergebnis der Wikianfrage
	var text = data [0];
	//Hole die Eingabe
	var input_text = document.getElementById ('spellcheckinput').value;
	//Bereinige die Eingabe
	input_text = input_text.replace(/\s/g, "");

	if (text != input_text)
		return;

	for (i=0; i<data [1].length; i++) {
		//Gehe die Ergebnisliste durch und prüfe ob das Wort genau übereinstimmt
		if (text.toLowerCase () == data [1] [i].toLowerCase ()) {
			found = true;
			//Pruefe ob erster Buchstabe groß ist, nur dann soll etwas passieren
			if (text.toLowerCase () != text) {
				url ='http://de.wikipedia.org/wiki/' + text;
				//document.getElementById ('spellcheckresult').innerHTML = '<b style="color:green">Begriff gefunden</b> - <a target="_new" href="' + url + '">' + text + '</a>';
				document.getElementById ('resulttext').innerHTML = searched + '<a target="_new" href="' + url + '">' + text + '</a>';
				searched = searched + '<a target="_new" href="' + url + '">' + text + '</a>' + ' ';
			}
			else {
				//document.getElementById ('spellcheckresult').innerHTML = '<b style="color:red">Begriff nicht gefunden</b> - ' + text + '';
				document.getElementById ('resulttext').innerHTML = searched + text + ' ';
				searched = searched +  text + ' ';
			}
		}
	}
	//Wenn keines der Ergebnisse passt, dann füge den Text unformatiert wieder ein
	if (! found) {
		//document.getElementById ('spellcheckresult').innerHTML = '<b style="color:red">Begriff nicht gefunden</b> - ' + text + '';
		document.getElementById ('resulttext').innerHTML = searched + text + ' ';
		searched = searched +  text + ' ';
	}
	
	//Leere das Eingabefeld
	document.getElementById ('spellcheckinput').value = '';
};

var checkavailability = function (value) {
	if (! value)
		return;
	//Entferne Leerzeichen
	value = value.replace(/\s/g, "");

	url = 'http://de.wikipedia.org/w/api.php?action=opensearch&search='+value+'&format=json&callback=wikicheck';

	var elem = document.createElement ('script');
	elem.setAttribute ('src', url);
	elem.setAttribute ('type','text/javascript');
	document.getElementsByTagName ('head') [0].appendChild (elem);
};
--></script>
<form action="#" method="get" onsubmit="return false">
<p>Geben Sie ein Wort ein: - 
	<input id="spellcheckinput" type="text"> 
	<button name="Start_lookup" onclick="checkavailability (spellcheckinput.value);"><p>Start lookup</p></button>
	<span id="spellcheckresult"></span>
</p>
</form>
<span id="resulttext">Hier steht Text</span><br>
<span id="debug">Debug information</span>
</body>
</html>

